<div id="app">
    <h1>Test2, Upload</h1>
    <p>サンプル ファイルアップロード</p>
    <input type="file" name="file1" id="file1"><br /><br />
    <!-- <button onClick="upload();">[ Up ]</button -->
    <hr />
</div>

<!-- -->
<script>
/*
window.addEventListener("load", function() {
});
*/
window.document.getElementById("file1").addEventListener("change", function() {
    console.log("#change");
    upload();
});

//
function upload(){
    console.log("#upload");
    var files = window.document.getElementById('file1').files;
    var fileObject = files[0];
    if (typeof fileObject === "undefined") {
        return;
    }
    var formData = new FormData();
        formData.append("file1", fileObject );
        var xhr = new XMLHttpRequest();
        xhr.onreadystatechange = function() {
            if (xhr.readyState === XMLHttpRequest.DONE) {
                if (xhr.status === 200) {
                    var data = JSON.parse(xhr.response)
                    console.log("OK, up");
                    console.log(data);
                } else {
                    console.log("NG, up");
                }
            }
        }
        xhr.open("POST", "/api_cms_posts/file_upload");
        xhr.send(formData);    
}
</script>

